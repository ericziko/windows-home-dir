import{a as nt}from"./chunk-N4FPBMMJ.js";import{a as Ee,b as we,c as at}from"./chunk-EQBJOA2X.js";import{$ as Le,Ab as le,Bb as ce,Cb as Se,Cc as Xe,Db as Ke,Eb as _e,Fc as de,Gc as pe,Hc as me,Ic as ue,Jc as fe,Kc as Ze,L as Ne,Lc as o,Mc as et,Nc as tt,Ob as Ge,Oc as ot,Pb as K,Qb as ye,Rb as Ue,Tb as Ye,U as ke,Ub as Z,Va as ne,Vb as A,Wb as De,Xb as $e,Yb as Qe,Zb as Je,_ as Fe,_b as ee,c as d,d as q,g as It,ha as je,hb as k,i as J,j as Re,jb as W,k as N,kb as qe,lb as $,mb as re,o as Te,oa as He,ob as ie,p as X,pa as Be,pb as Ve,q as Oe,qb as se,r as E,ra as ze,ta as Me,ua as Ae,y as Pe,zb as We}from"./chunk-BAOGVYAT.js";var yt=d(It());var M=d(q());var H=d(q());var rt=d(q());var st=d(E()),P=(0,rt.createContext)({}),it=({children:a})=>{let e=tt(),r=e?.state;return(0,st.jsx)(P.Provider,{value:{state:r,themeKind:e?.themeKind,isSqlProjectExtensionInstalled:function(){e?.extensionRpc.action("isSqlProjectExtensionInstalled",{})},listActiveServers:function(){e?.extensionRpc.action("listActiveServers",{})},listDatabasesForActiveServer:function(t){e?.extensionRpc.action("listDatabasesForActiveServer",{connectionUri:t})},openAddNewConnectionDialog:function(){e?.extensionRpc.action("openAddNewConnectionDialog",{})},selectFile:function(t,n,m){e?.extensionRpc.action("selectFile",{endpoint:t,endpointType:n,fileType:m})},confirmSelectedSchema:function(t,n){e?.extensionRpc.action("confirmSelectedSchema",{endpointType:t,folderStructure:n})},confirmSelectedDatabase:function(t,n,m){e?.extensionRpc.action("confirmSelectedDatabase",{endpointType:t,serverConnectionUri:n,databaseName:m})},setIntermediarySchemaOptions:function(){e?.extensionRpc.action("setIntermediarySchemaOptions",{})},intermediaryGeneralOptionsChanged(t){e?.extensionRpc.action("intermediaryGeneralOptionsChanged",{key:t})},intermediaryIncludeObjectTypesOptionsChanged(t){e?.extensionRpc.action("intermediaryIncludeObjectTypesOptionsChanged",{key:t})},confirmSchemaOptions:function(t){e?.extensionRpc.action("confirmSchemaOptions",{optionsChanged:t})},switchEndpoints:function(t,n){e?.extensionRpc.action("switchEndpoints",{newSourceEndpointInfo:t,newTargetEndpointInfo:n})},compare:function(t,n,m){e?.extensionRpc.action("compare",{sourceEndpointInfo:t,targetEndpointInfo:n,deploymentOptions:m})},generateScript:function(t,n){e?.extensionRpc.action("generateScript",{targetServerName:t,targetDatabaseName:n})},publishChanges:function(t,n){e?.extensionRpc.action("publishChanges",{targetServerName:n,targetDatabaseName:t})},publishDatabaseChanges:function(t,n){e?.extensionRpc.action("publishDatabaseChanges",{targetServerName:t,targetDatabaseName:n})},publishProjectChanges:function(t,n,m){e?.extensionRpc.action("publishProjectChanges",{targetProjectPath:t,targetFolderStructure:n,taskExecutionMode:m})},resetOptions:function(){e?.extensionRpc.action("resetOptions",{})},includeExcludeNode:function(t,n,m){e?.extensionRpc.action("includeExcludeNode",{id:t,diffEntry:n,includeRequest:m})},includeExcludeAllNodes:function(t){e?.extensionRpc.action("includeExcludeAllNodes",{includeRequest:t})},openScmp:function(){e?.extensionRpc.action("openScmp",{})},saveScmp:function(){e?.extensionRpc.action("saveScmp",{})},cancel:function(){e?.extensionRpc.action("cancel",{})}},children:a})};var L=d(q()),lt=(a={})=>{let{minHeight:e=100,maxHeight:r,initialHeight:t=200,onResize:n,siblingRef:m}=a,[v,p]=(0,L.useState)(t),y=(0,L.useRef)(null),w=(0,L.useRef)(0),g=(0,L.useRef)(0),f=(0,L.useRef)(!1),x=(0,L.useCallback)(O=>{O.preventDefault(),f.current=!0,w.current=O.clientY,g.current=v,document.addEventListener("mousemove",R),document.addEventListener("mouseup",S)},[v]),R=(0,L.useCallback)(O=>{if(!f.current)return;let j=O.clientY-w.current,T=g.current+j;e&&(T=Math.max(T,e)),r&&(T=Math.min(T,r)),p(T)},[e,r]);(0,L.useEffect)(()=>{if(n&&n(v),m?.current&&y.current){let T=(y.current.parentElement?.clientHeight||0)-v-8;m.current.style.height=`${Math.max(T,e)}px`}let O=new Event("resize");window.dispatchEvent(O)},[v,n,m,e]);let S=(0,L.useCallback)(()=>{f.current&&(f.current=!1,document.removeEventListener("mousemove",R),document.removeEventListener("mouseup",S))},[R]);return(0,L.useEffect)(()=>()=>{document.removeEventListener("mousemove",R),document.removeEventListener("mouseup",S)},[R,S]),{ref:y,height:v,resizerProps:{onMouseDown:x,style:{cursor:"ns-resize",height:"8px",width:"100%",backgroundColor:"transparent",position:"absolute",bottom:0,left:0,zIndex:10}}}};var u=d(E()),xt=N({HeaderCellPadding:{padding:"0 8px"},selectedRow:{backgroundColor:"var(--vscode-list-activeSelectionBackground)",color:"var(--vscode-list-activeSelectionForeground)","& td":{backgroundColor:"var(--vscode-list-activeSelectionBackground)",color:"var(--vscode-list-activeSelectionForeground)"}},resizableContainer:{position:"relative",width:"100%",overflow:"hidden"},resizer:{position:"absolute",bottom:0,left:0,width:"100%",height:"8px",cursor:"ns-resize",backgroundColor:"transparent",zIndex:10,"&:hover":{backgroundColor:"var(--vscode-scrollbarSlider-hoverBackground)",opacity:.5},"&:active":{backgroundColor:"var(--vscode-scrollbarSlider-activeBackground)",opacity:.7}},resizerHandle:{height:"3px",width:"40px",margin:"2px auto",borderRadius:"1px",backgroundColor:"var(--vscode-scrollbarSlider-background)",opacity:.5}}),Rt=H.forwardRef(({onDiffSelected:a,selectedDiffId:e,siblingRef:r},t)=>{let n=xt(),{targetDocument:m}=Te(),v=Oe({targetDocument:m}),p=H.useContext(P),y=p.state.schemaCompareResult,[w,g]=H.useState("allIncluded"),{ref:f,height:x,resizerProps:R}=lt({initialHeight:300,minHeight:150,maxHeight:800,siblingRef:r}),S=H.useRef(null);H.useEffect(()=>{e>=0&&S.current&&S.current.scrollToItem(e,"center")},[e]),H.useImperativeHandle(t,()=>f.current),H.useEffect(()=>{let i=!0,D=!0,s=!1;for(let c of y.differences)c.included||(i=!1),c.included&&(D=!1);!i&&!D&&(s=!0),g(s?"mixed":i?"allIncluded":"allExcluded")},[p.state.schemaCompareResult]);let O=i=>!i||i.length===0?"":i.join("."),j=(i,D)=>{i.position!==void 0&&p.includeExcludeNode(i.position,i,D)},T=()=>{w==="allExcluded"||w==="mixed"?p.includeExcludeAllNodes(!0):p.includeExcludeAllNodes(!1)},F=i=>{let D="";switch(i){case 2:D=o.schemaCompare.add;break;case 1:D=o.schemaCompare.change;break;case 0:D=o.schemaCompare.delete;break}return D},ae=[Z({columnId:"type",renderCell:i=>(0,u.jsx)(A,{children:i.name})}),Z({columnId:"sourceName",renderCell:i=>(0,u.jsx)(A,{children:O(i.sourceValue)})}),Z({columnId:"include",renderCell:i=>(0,u.jsx)(A,{children:(0,u.jsx)($,{checked:i.included,onClick:()=>j(i,!i.included)})})}),Z({columnId:"action",renderCell:i=>(0,u.jsx)(A,{children:F(i.updateAction)})}),Z({columnId:"targetName",renderCell:i=>(0,u.jsx)(A,{children:O(i.targetValue)})})],h=[];y?.success&&(h=y.differences.map((i,D)=>({position:D,...i})));let{getRows:C,selection:{toggleRow:V}}=Ye({columns:ae,items:h},[Ue({selectionMode:"multiselect"})]),Y=C(i=>{let D=i.item.included;return{...i,onClick:s=>V(s,i.rowId),onKeyDown:s=>{s.key===" "&&(s.preventDefault(),V(s,i.rowId))},selected:D,appearance:D?"brand":"none"}}),Ce=i=>{i.key===" "&&(T(),i.preventDefault())},be=(i,D,s)=>{i.key==="Enter"&&(D.position!==void 0&&a(D.position),i.preventDefault()),i.key===" "&&(j(D,s),i.preventDefault())},ve=({index:i,style:D,data:s})=>{let{item:c,appearance:Dt,onKeyDown:Et}=s[i];return(0,u.jsxs)(De,{"aria-rowindex":i+2,style:D,onKeyDown:Et,onClick:()=>a(i),appearance:Dt,className:i===e?n.selectedRow:void 0,children:[(0,u.jsx)(A,{children:c.name}),(0,u.jsx)(A,{children:O(c.sourceValue)}),(0,u.jsx)(A,{children:(0,u.jsx)($,{checked:c.included,onClick:()=>j(c,!c.included),onKeyDown:wt=>be(wt,c,!c.included),disabled:p.state.isIncludeExcludeAllOperationInProgress})}),(0,u.jsx)(A,{children:F(c.updateAction)}),(0,u.jsx)(A,{children:O(c.targetValue)})]},c.position)};return(0,u.jsxs)("div",{className:n.resizableContainer,ref:f,style:{height:`${x}px`},children:[(0,u.jsxs)(Qe,{noNativeElements:!0,"aria-label":"Table with selection","aria-rowcount":Y.length,style:{minWidth:"650px"},children:[(0,u.jsx)(Je,{children:(0,u.jsxs)(De,{"aria-rowindex":1,children:[(0,u.jsx)(ee,{className:n.HeaderCellPadding,children:o.schemaCompare.type}),(0,u.jsx)(ee,{className:n.HeaderCellPadding,children:o.schemaCompare.sourceName}),(0,u.jsxs)(ee,{children:[!p.state.isIncludeExcludeAllOperationInProgress&&(0,u.jsx)($,{checked:w==="allIncluded"?!0:w==="mixed"?"mixed":!1,onClick:()=>T(),onKeyDown:Ce}),p.state.isIncludeExcludeAllOperationInProgress&&(0,u.jsx)(ce,{size:"extra-tiny","aria-label":o.schemaCompare.includeExcludeAllOperationInProgress})]}),(0,u.jsx)(ee,{className:n.HeaderCellPadding,children:o.schemaCompare.action}),(0,u.jsx)(ee,{className:n.HeaderCellPadding,children:o.schemaCompare.targetName}),(0,u.jsx)("div",{role:"presentation",style:{width:v}})]})}),(0,u.jsx)($e,{children:(0,u.jsx)(nt,{ref:S,height:x-40,itemCount:h.length,itemSize:45,width:"100%",itemData:Y,children:ve})})]}),(0,u.jsx)("div",{...R,className:n.resizer,children:(0,u.jsx)("div",{className:n.resizerHandle})})]})}),ct=Rt;var pt=d(q());var Q=d(E()),Tt=N({layoutVertically:{display:"flex",flexDirection:"column",gap:"2px"},layoutHorizontally:{display:"flex",flexDirection:"row"},inputWidth:{width:"100%",maxWidth:"745px",minwidth:"300px"},buttonLeftSmallMargin:{marginLeft:"8px"}}),Ot=a=>{let e=Tt();return(0,Q.jsxs)("div",{className:J(e.layoutVertically,e.inputWidth),children:[(0,Q.jsx)(W,{htmlFor:a.id,size:a.size,disabled:a.disabled,children:a.label}),(0,Q.jsxs)("div",{className:J(e.layoutHorizontally,a.className??""),children:[(0,Q.jsx)(se,{id:a.id,className:e.inputWidth,value:a.value,readOnly:!0}),(0,Q.jsx)(k,{size:"small",className:e.buttonLeftSmallMargin,disabled:a.disableBrowseButton,onClick:a.selectFile,children:"..."})]})]})},Ie=Ot;var te=d(E()),Pt=N({topMargin:{...Re.margin("32px","32px","0")},marginRight:{marginRight:"32px"},layoutHorizontally:{display:"flex",flexDirection:"row"},center:{justifyContent:"center"},button:{height:"32px",position:"relative",top:"20px"},buttonLeftMargin:{marginLeft:"32px"}});function dt(a){return(a?.serverName&&a?.databaseName?`${a?.connectionName||a?.serverName}.${a?.databaseName}`:"")||a?.packageFilePath||a?.projectFilePath||""}var Nt=({onSelectSchemaClicked:a})=>{let e=X("source"),r=X("target"),t=Pt(),n=(0,pt.useContext)(P),m=n.state.sourceEndpointInfo,v=dt(m),p=n.state.targetEndpointInfo,y=dt(p),w=()=>{n.compare(n.state.sourceEndpointInfo,n.state.targetEndpointInfo,n.state.defaultDeploymentOptionsResult.defaultDeploymentOptions)},g=f=>!(f&&(f.serverDisplayName||f.packageFilePath||f.projectFilePath));return(0,te.jsxs)("div",{className:J(t.layoutHorizontally,t.center,t.topMargin),children:[(0,te.jsx)(Ie,{id:e,label:o.schemaCompare.source,value:v,disableBrowseButton:n.state.isComparisonInProgress,selectFile:()=>a("source"),className:t.marginRight}),(0,te.jsx)(Ie,{id:r,label:o.schemaCompare.target,value:y,disableBrowseButton:n.state.isComparisonInProgress,selectFile:()=>a("target")}),(0,te.jsx)(k,{className:J(t.button,t.buttonLeftMargin),size:"medium",onClick:w,disabled:g(n.state.sourceEndpointInfo)||g(n.state.targetEndpointInfo)||n.state.isComparisonInProgress,children:o.schemaCompare.compare})]})},mt=Nt;var _=d(q());var oe=d(E()),kt=N({dividerContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyItems:"center",minHeight:"36px",backgroundColor:Pe.colorNeutralBackground1},dividerFont:{fontSize:"14px",fontWeight:"bold"},editorContainer:{height:"100%",overflow:"hidden",display:"flex",flexDirection:"column"}}),xe=(a,e)=>{let r="";if(a!==null){let t=ut(e?a.sourceScript:a.targetScript);t&&(r+=t+`

`),a.children.forEach(n=>{let m=xe(n,e);r+=m})}return r},ut=a=>a||"",Ft=(0,_.forwardRef)(({selectedDiffId:a,renderSideBySide:e},r)=>{let t=kt(),n=(0,_.useContext)(P),v=n.state.schemaCompareResult?.differences[a],p=(0,_.useRef)(null),y=v?.sourceScript?xe(v,!0):"",w=v?.targetScript?xe(v,!1):"",g=f=>{p.current=f};return(0,_.useEffect)(()=>{let f=()=>{p.current&&p.current.layout()};return window.addEventListener("resize",f),()=>{window.removeEventListener("resize",f)}},[]),(0,oe.jsxs)("div",{ref:r,className:t.editorContainer,children:[(0,oe.jsx)("div",{className:t.dividerContainer,children:(0,oe.jsx)(Ve,{className:t.dividerFont,alignContent:"start",children:o.schemaCompare.compareDetails})}),(0,oe.jsx)(at,{height:"100%",language:"sql",original:w,modified:y,theme:ot(n.themeKind),options:{renderSideBySide:e??!0,renderOverviewRuler:!0,OverviewRulerLane:0,readOnly:!0},onMount:g})]})}),ft=Ft;var B=d(q());var l=d(E()),jt=N({drawerWidth:{width:"400px"},fileInputWidth:{width:"300px"},positionItemsHorizontally:{display:"flex",flexDirection:"row"},buttonLeftMargin:{marginLeft:"8px"},footer:{display:"flex",justifyContent:"flex-end"}});function Ht(a){if(a===void 0)return"";switch(a){case 0:return"database";case 1:return"dacpac";case 2:return"sqlproj";default:return""}}function Bt(a){if(a===void 0)return"";switch(a){case 1:return"File";case 2:return"Flat";case 3:return"Object Type";case 4:return"Schema";case 5:default:return"Schema/Object Type"}}var zt=a=>{let e=jt(),r=(0,B.useContext)(P),t=a.endpointType==="source"?r.state.sourceEndpointInfo:r.state.targetEndpointInfo,[n,m]=(0,B.useState)(Ht(t?.endpointType||0)),[v,p]=(0,B.useState)(!0),[y,w]=(0,B.useState)(t?.ownerUri||""),[g,f]=(0,B.useState)(t?.connectionName||t?.serverName||""),[x,R]=(0,B.useState)(t?.databaseName||""),[S,O]=(0,B.useState)(Bt(t?.extractTarget||5)),j=X("file"),T=X("folderStructure"),F=[{value:"File",display:o.schemaCompare.file},{value:"Flat",display:o.schemaCompare.flat},{value:"Object Type",display:o.schemaCompare.objectType},{value:"Schema",display:o.schemaCompare.schema},{value:"Schema/Object Type",display:o.schemaCompare.schemaObjectType}];(0,B.useEffect)(()=>{r.listActiveServers(),t?.ownerUri&&r.listDatabasesForActiveServer(t?.ownerUri)},[]),(0,B.useEffect)(()=>{h(n)},[r.state.auxiliaryEndpointInfo,y,x]);let ae=a.endpointType==="source"?o.schemaCompare.selectSource:o.schemaCompare.selectTarget,h=s=>{s==="database"&&y&&x||s==="dacpac"&&(r.state.auxiliaryEndpointInfo?.packageFilePath||t?.packageFilePath)||s==="sqlproj"&&(r.state.auxiliaryEndpointInfo?.projectFilePath||t?.projectFilePath)?p(!1):p(!0)},C=()=>{if(n==="dacpac")return r.state.auxiliaryEndpointInfo?.packageFilePath||t?.packageFilePath||"";if(n==="sqlproj")return r.state.auxiliaryEndpointInfo?.projectFilePath||t?.projectFilePath||""},V=s=>{m(s),h(s)},Y=(s,c)=>{c.optionValue&&(w(c.optionValue),f(c.optionText??""),R(""),r.listDatabasesForActiveServer(c.optionValue))},Ce=(s,c)=>{c.optionValue&&R(c.optionValue)},be=s=>{let c=a.endpointType==="source"?r.state.sourceEndpointInfo:r.state.targetEndpointInfo;r.selectFile(c,a.endpointType,s)},ve=(s,c)=>{c.optionValue&&O(c.optionValue)},i=()=>{n==="database"?r.confirmSelectedDatabase(a.endpointType,y,x):r.confirmSelectedSchema(a.endpointType,S),a.showDrawer(!1)},D=r.state.isSqlProjectExtensionInstalled;return(0,l.jsxs)(de,{separator:!0,open:a.show,onOpenChange:(s,{open:c})=>a.showDrawer(c),position:"end",size:"medium",children:[(0,l.jsx)(me,{children:(0,l.jsx)(ue,{action:(0,l.jsx)(k,{appearance:"subtle","aria-label":o.schemaCompare.close,icon:(0,l.jsx)(ne,{}),onClick:()=>a.showDrawer(!1)}),children:ae})}),(0,l.jsxs)(pe,{children:[(0,l.jsx)(qe,{label:o.schemaCompare.type,children:(0,l.jsxs)(We,{value:n,onChange:(s,c)=>V(c.value),children:[(0,l.jsx)(le,{value:"database",label:o.schemaCompare.database}),(0,l.jsx)(le,{value:"dacpac",label:o.schemaCompare.dataTierApplicationFile}),D&&(0,l.jsx)(le,{value:"sqlproj",label:o.schemaCompare.databaseProject})]})}),n==="database"&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(W,{children:o.schemaCompare.server}),(0,l.jsxs)("div",{className:e.positionItemsHorizontally,children:[(0,l.jsx)(ie,{className:e.fileInputWidth,value:g,selectedOptions:[y],onOptionSelect:(s,c)=>Y(s,c),children:Object.keys(r.state.activeServers).map(s=>(0,l.jsx)(re,{value:s,children:r.state.activeServers[s].profileName||r.state.activeServers[s].server},s))}),(0,l.jsx)(k,{className:e.buttonLeftMargin,size:"large",icon:(0,l.jsx)(Be,{}),onClick:()=>{r.openAddNewConnectionDialog()}})]}),(0,l.jsx)(W,{children:o.schemaCompare.database}),(0,l.jsx)("div",{children:(0,l.jsx)(ie,{className:e.fileInputWidth,value:x,selectedOptions:[x],onOptionSelect:(s,c)=>Ce(s,c),children:r.state.databases.map(s=>(0,l.jsx)(re,{value:s,children:s},s))})})]}),(n==="dacpac"||n==="sqlproj")&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(W,{htmlFor:j,children:o.schemaCompare.file}),(0,l.jsxs)("div",{className:e.positionItemsHorizontally,children:[(0,l.jsx)(se,{id:j,size:a.size,disabled:a.disabled,className:e.fileInputWidth,value:C(),readOnly:!0}),(0,l.jsx)(k,{className:e.buttonLeftMargin,size:"large",icon:(0,l.jsx)(je,{}),onClick:()=>be(n)})]}),a.endpointType==="target"&&n==="sqlproj"&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(W,{htmlFor:T,children:o.schemaCompare.folderStructure}),(0,l.jsx)("div",{children:(0,l.jsx)(ie,{id:T,className:e.fileInputWidth,value:S,selectedOptions:[S],onOptionSelect:(s,c)=>ve(s,c),children:F.map(s=>(0,l.jsx)(re,{children:s.display},s.value))})})]})]})]}),(0,l.jsxs)(fe,{children:[(0,l.jsx)(k,{disabled:v,appearance:"primary",onClick:()=>i(),children:o.schemaCompare.ok}),(0,l.jsx)(k,{appearance:"secondary",onClick:()=>a.showDrawer(!1),children:o.schemaCompare.cancel})]})]})},ht=zt;var he=d(q());var I=d(E()),Mt=a=>{let e=(0,he.useContext)(P);(0,he.useEffect)(()=>{e.state.endpointsSwitched&&e.state.sourceEndpointInfo&&e.state.targetEndpointInfo&&r()},[e.state.endpointsSwitched]);let r=()=>{e.compare(e.state.sourceEndpointInfo,e.state.targetEndpointInfo,e.state.defaultDeploymentOptionsResult.defaultDeploymentOptions)},t=()=>{e.cancel()},n=()=>{e.generateScript(e.state.targetEndpointInfo.serverName,e.state.targetEndpointInfo.databaseName)},m=()=>{e.publishChanges(e.state.targetEndpointInfo.serverName,e.state.targetEndpointInfo.databaseName)},v=()=>{a.onOptionsClicked()},p=()=>{e.switchEndpoints(e.state.targetEndpointInfo,e.state.sourceEndpointInfo)},y=()=>{e.openScmp()},w=()=>{e.saveScmp()},g=S=>!(S&&(S.serverDisplayName||S.packageFilePath||S.projectFilePath)),f=()=>e.state.schemaCompareResult.differences.some(S=>S.included),x=()=>{if(e.state.targetEndpointInfo&&Number(e.state.targetEndpointInfo.endpointType)===0){if(e.state.isComparisonInProgress)return!0;if(e.state.schemaCompareResult===void 0||e.state.schemaCompareResult.differences.length===0)return!0}else return!0;return!f()},R=()=>e.state.schemaCompareResult&&e.state.schemaCompareResult.differences&&e.state.schemaCompareResult.differences.length>0&&Number(e.state.targetEndpointInfo.endpointType)!==1?!f():!0;return(0,I.jsxs)(Ge,{children:[(0,I.jsx)(K,{"aria-label":o.schemaCompare.compare,title:o.schemaCompare.compare,icon:(0,I.jsx)(ke,{}),onClick:r,disabled:g(e.state.sourceEndpointInfo)||g(e.state.targetEndpointInfo)||e.state.isComparisonInProgress,children:o.schemaCompare.compare}),(0,I.jsx)(K,{"area-label":o.schemaCompare.stop,title:o.schemaCompare.stop,icon:(0,I.jsx)(Ae,{}),onClick:t,disabled:!e.state.isComparisonInProgress,children:o.schemaCompare.stop}),(0,I.jsx)(K,{"aria-label":o.schemaCompare.generateScript,title:o.schemaCompare.generateScriptToDeployChangesToTarget,icon:(0,I.jsx)(Le,{}),onClick:n,disabled:x(),children:o.schemaCompare.generateScript}),(0,I.jsx)(K,{"aria-label":o.schemaCompare.apply,title:o.schemaCompare.applyChangesToTarget,icon:(0,I.jsx)(He,{}),onClick:m,disabled:e.state.isComparisonInProgress||R(),children:o.schemaCompare.apply}),(0,I.jsx)(K,{"aria-lable":o.schemaCompare.options,title:o.schemaCompare.options,icon:(0,I.jsx)(Me,{}),onClick:v,disabled:e.state.isComparisonInProgress||g(e.state.sourceEndpointInfo)||g(e.state.targetEndpointInfo),children:o.schemaCompare.options}),(0,I.jsx)(ye,{}),(0,I.jsx)(K,{"aria-label":o.schemaCompare.switchDirection,title:o.schemaCompare.switchSourceAndTarget,icon:(0,I.jsx)(Ne,{}),onClick:p,disabled:e.state.isComparisonInProgress||g(e.state.sourceEndpointInfo)||g(e.state.targetEndpointInfo),children:o.schemaCompare.switchDirection}),(0,I.jsx)(ye,{}),(0,I.jsx)(K,{"aria-label":o.schemaCompare.openScmpFile,title:o.schemaCompare.loadSourceTargetAndOptionsSavedInAnScmpFile,icon:(0,I.jsx)(Fe,{}),onClick:y,disabled:e.state.isComparisonInProgress,children:o.schemaCompare.openScmpFile}),(0,I.jsx)(K,{"aria-label":o.schemaCompare.saveScmpFile,title:o.schemaCompare.saveSourceAndTargetOptionsAndExcludedElements,icon:(0,I.jsx)(ze,{}),onClick:w,disabled:e.state.isComparisonInProgress||g(e.state.sourceEndpointInfo)||g(e.state.targetEndpointInfo),children:o.schemaCompare.saveScmpFile})]})},gt=Mt;var G=d(q());var b=d(E()),At=N({optionsContainer:{height:"75vh",overflowY:"auto"},listItemContainer:{display:"flex",alignItems:"center"},searchContainer:{margin:"10px 0",width:"100%"}}),qt=a=>{let e=At(),r=(0,G.useContext)(P),[t,n]=(0,G.useState)(!1),[m,v]=(0,G.useState)("generalOptions"),[p,y]=(0,G.useState)("");(0,G.useEffect)(()=>{r.setIntermediarySchemaOptions()},[]);let w=r.state.intermediaryOptionsResult?.defaultDeploymentOptions,g=w?.booleanOptionsDictionary,f=[];g&&(f=Object.entries(g),f.sort(([h,C],[V,Y])=>C.displayName.toLowerCase().localeCompare(Y.displayName.toLowerCase())));let x=w?.objectTypesDictionary,R=[];x&&(R=Object.entries(x),R.sort(([h,C],[V,Y])=>h.toLowerCase().localeCompare(V.toLowerCase())));let S=f.filter(([h,C])=>p===""||C.displayName.toLowerCase().includes(p.toLowerCase())),O=R.filter(([h,C])=>p===""||C.toLowerCase().includes(p.toLowerCase())),j=(h,C)=>{v(C.value)},T=h=>{r.intermediaryGeneralOptionsChanged(h),n(!0)},F=h=>{r.intermediaryIncludeObjectTypesOptionsChanged(h),n(!0)},ae=h=>w.excludeObjectTypes.value?.find(V=>V.toLowerCase()===h.toLowerCase())===void 0;return(0,b.jsxs)(de,{separator:!0,open:a.show,onOpenChange:(h,{open:C})=>a.showDrawer(C),position:"end",size:"medium",children:[(0,b.jsx)(me,{children:(0,b.jsx)(ue,{action:(0,b.jsx)(k,{appearance:"subtle","aria-label":o.schemaCompare.close,icon:(0,b.jsx)(ne,{}),onClick:()=>a.showDrawer(!1)}),children:o.schemaCompare.schemaCompareOptions})}),(0,b.jsxs)(pe,{children:[(0,b.jsx)(Ze,{className:e.searchContainer,placeholder:o.schemaCompare.searchOptions,value:p,onChange:(h,C)=>y(C.value)}),(0,b.jsxs)(Ke,{selectedValue:m,onTabSelect:j,children:[(0,b.jsx)(Se,{id:"GeneralOptions",value:"generalOptions",children:o.schemaCompare.generalOptions}),(0,b.jsx)(Se,{id:"IncludeObjectTypes",value:"includeObjectTypes",children:o.schemaCompare.includeObjectTypes})]}),m==="generalOptions"&&(0,b.jsx)(Ee,{className:e.optionsContainer,children:g&&S.map(([h,C])=>(0,b.jsx)(we,{className:e.listItemContainer,value:h,"aria-label":C.displayName,children:(0,b.jsx)($,{checked:C.value,onChange:()=>T(h),label:(0,b.jsx)(Xe,{"aria-label":C.displayName,info:(0,b.jsx)(b.Fragment,{children:C.description}),children:C.displayName})})},h))}),m==="includeObjectTypes"&&(0,b.jsx)(Ee,{className:e.optionsContainer,children:x&&O.map(([h,C])=>(0,b.jsx)(we,{className:e.listItemContainer,value:h,"aria-label":C,children:(0,b.jsx)($,{checked:ae(h),onChange:()=>F(h),label:(0,b.jsx)(W,{"aria-label":C,children:C})})},h))})]}),(0,b.jsxs)(fe,{children:[(0,b.jsx)(k,{appearance:"secondary",onClick:()=>r.resetOptions(),children:o.schemaCompare.reset}),(0,b.jsx)(k,{appearance:"primary",onClick:()=>{r.confirmSchemaOptions(t),a.showDrawer(!1)},children:o.schemaCompare.ok}),(0,b.jsx)(k,{appearance:"secondary",onClick:()=>a.showDrawer(!1),children:o.schemaCompare.cancel})]})]})},Ct=qt;var bt=d(q());var U=d(E()),Vt=N({container:{marginTop:"32px",display:"flex",gap:"16px",flexDirection:"column",alignItems:"stretch"}}),Wt=()=>{let e=(0,bt.useContext)(P).state,r=Vt(),t="";return!e.isComparisonInProgress&&e.schemaCompareResult&&e.schemaCompareResult.areEqual?t=o.schemaCompare.noDifferences:e.isComparisonInProgress?t=o.schemaCompare.initializingComparison:!e.isComparisonInProgress&&!e.schemaCompareResult&&(t=o.schemaCompare.intro),t?(0,U.jsxs)("div",{className:r.container,children:[e.isComparisonInProgress&&(0,U.jsx)(ce,{labelPosition:"below",label:t}),!e.isComparisonInProgress&&(0,U.jsx)(_e,{size:400,align:"center",children:t})]}):(0,U.jsx)(U.Fragment,{})},vt=Wt;var z=d(E()),Kt=N({container:{display:"flex",flexDirection:"column",height:"100vh",overflow:"hidden"},contentContainer:{display:"flex",flexDirection:"column",flex:1,overflow:"hidden",position:"relative"},resizableContainer:{display:"flex",flexDirection:"column",flex:1,overflow:"hidden",position:"relative"}}),St=()=>{let a=Kt(),e=(0,M.useContext)(P),[r,t]=(0,M.useState)(0),[n,m]=(0,M.useState)(!1),[v,p]=(0,M.useState)(!1),[y,w]=(0,M.useState)("source"),g=(0,M.useRef)(null),f=(0,M.useRef)(null);(0,M.useEffect)(()=>{e.isSqlProjectExtensionInstalled()},[]);let x=F=>{m(!0),w(F)},R=F=>{t(F)},S=F=>{m(F)},O=()=>{p(!0)},j=F=>{p(F)},T=()=>!!(!e.state.schemaCompareResult||e.state.schemaCompareResult.areEqual||e.state.isComparisonInProgress);return(0,z.jsxs)("div",{className:a.container,children:[(0,z.jsx)(gt,{onOptionsClicked:O}),(0,z.jsx)(mt,{onSelectSchemaClicked:x}),T()&&(0,z.jsx)(vt,{}),!T()&&(0,z.jsx)("div",{className:a.contentContainer,children:(0,z.jsxs)("div",{className:a.resizableContainer,children:[(0,z.jsx)(ct,{ref:g,selectedDiffId:r,onDiffSelected:R,siblingRef:f}),r!==-1&&(0,z.jsx)(ft,{ref:f,selectedDiffId:r})]})}),n&&(0,z.jsx)(ht,{show:n,endpointType:y,showDrawer:S}),v&&(0,z.jsx)(Ct,{show:v,showDrawer:j})]})};var ge=d(E());yt.default.createRoot(document.getElementById("root")).render((0,ge.jsx)(et,{children:(0,ge.jsx)(it,{children:(0,ge.jsx)(St,{})})}));
