import{Bc as se,Cc as oe,Eb as M,Fb as K,Lc as n,Mc as le,Nc as ie,Sb as J,Sc as ce,Tb as X,Ub as h,Vb as Y,Wb as H,Xb as Z,Yb as ee,Zb as te,_b as re,ba as $,c as p,d as V,g as je,gb as Q,h as G,hb as v,k as U,mb as I,ob as A,qb as W,r as E,yc as ne,zc as ae}from"./chunk-BAOGVYAT.js";var xe=p(je());var ue=p(V());var pe=p(E()),k=(0,ue.createContext)(void 0),de=({children:c})=>{let i=ie(),f=i?.state;return(0,pe.jsx)(k.Provider,{value:{...ce(i),state:f,themeKind:i?.themeKind,submit:function(T){i?.extensionRpc.action("submit",{filters:T})},clearAllFilters:function(){},cancel:function(){i?.extensionRpc.action("cancel",{})}},children:c})};var m=p(V());var r=p(E()),ye=U({root:{flexDirection:"column",display:"flex",paddingTop:"10px",paddingLeft:"10px","> *":{marginTop:"5px",marginBottom:"5px"}},inputs:{maxWidth:"150px",minWidth:"150px",width:"150px"},tableCell:{display:"flex",flexDirection:"column","> *":{marginTop:"5px",marginBottom:"5px"}},operatorOptions:{maxWidth:"150px",minWidth:"150px",width:"150px"},andOrText:{marginLeft:"10px"}}),me=()=>{let c=ye(),i=(0,m.useContext)(k),[f,T]=(0,m.useState)(void 0),[a,x]=(0,m.useState)([]),be=n.objectExplorerFiltering.and,w=n.objectExplorerFiltering.contains,N=n.objectExplorerFiltering.notContains,B=n.objectExplorerFiltering.startsWith,P=n.objectExplorerFiltering.notStartsWith,q=n.objectExplorerFiltering.endsWith,R=n.objectExplorerFiltering.notEndsWith,b=n.objectExplorerFiltering.equals,g=n.objectExplorerFiltering.notEquals,C=n.objectExplorerFiltering.lessThan,O=n.objectExplorerFiltering.lessThanOrEquals,S=n.objectExplorerFiltering.greaterThan,j=n.objectExplorerFiltering.greaterThanOrEquals,u=n.objectExplorerFiltering.between,d=n.objectExplorerFiltering.notBetween;function y(s){if(s!==void 0)switch(s){case 8:return w;case 9:return N;case 10:return B;case 11:return P;case 12:return q;case 13:return R;case 0:return b;case 1:return g;case 2:return C;case 3:return O;case 4:return S;case 5:return j;case 6:return u;case 7:return d;default:return""}}function ge(s){switch(s){case w:return 8;case N:return 9;case B:return 10;case P:return 11;case q:return 12;case R:return 13;case b:return 0;case g:return 1;case C:return 2;case O:return 3;case S:return 4;case j:return 5;case u:return 6;case d:return 7;default:return 0}}function z(s){switch(s.type){case 2:return[b,g];case 0:return[w,N,B,P,q,R,b,g];case 1:return[b,g,C,O,S,j,u,d];case 3:return[b,g,C,O,S,j,u,d];case 4:return[b,g];default:return[]}}function Ee(s){switch(s.type){case 4:return s.choices.map(t=>({name:t.value,displayName:t.displayName}));case 2:return[{name:"true",displayName:"True"},{name:"false",displayName:"False"}];default:return}}(0,m.useEffect)(()=>{function s(){let e=document.getElementById("input-0");e&&e.focus()}let t=()=>{x(i?.state?.filterProperties?.map((e,o)=>{let l=i?.state?.existingFilters?.find(Se=>Se.name===e.name);return{index:o,name:e.name,displayName:e.displayName,value:l?.value??"",type:e.type,choices:Ee(e)??[],operatorOptions:z(e),selectedOperator:l===void 0?z(e)[0]:y(l?.operator)??"",description:e.description}})??[])};s(),t(),T(void 0)},[i?.state?.filterProperties]);function fe(s,t){switch(s){case"property":return(0,r.jsx)(oe,{size:"small",info:(0,r.jsx)(r.Fragment,{children:t.description}),children:t.displayName});case"operator":return(0,r.jsxs)("div",{className:c.tableCell,children:[(0,r.jsx)(A,{id:`operator-${t.index}`,className:c.operatorOptions,size:"small",value:t.selectedOperator??"",selectedOptions:[t.selectedOperator],onOptionSelect:(e,o)=>{a[t.index].selectedOperator=o.optionValue,o.optionValue===u||o.optionValue===d?Array.isArray(a[t.index].value)||(a[t.index].value=[a[t.index].value,""]):Array.isArray(a[t.index].value)&&(a[t.index].value=a[t.index].value[0]),x([...a])},children:t.operatorOptions.map(e=>(0,r.jsx)(I,{value:e,children:e},e))}),t.selectedOperator===u||t.selectedOperator===d&&(0,r.jsx)(M,{className:c.andOrText,size:200,children:be})]});case"value":switch(t.type){case 3:case 1:case 0:let e="text";switch(t.type){case 3:e="date";break;case 1:e="number";break;case 0:e="text";break}return t.selectedOperator===u||t.selectedOperator===d?(0,r.jsxs)("div",{className:c.tableCell,children:[(0,r.jsx)(W,{id:`input-${t.index}`,size:"small",type:e,className:c.inputs,value:t.value[0],onChange:(o,l)=>{a[t.index].value[0]=l.value,x([...a])}}),(0,r.jsx)(W,{size:"small",type:e,className:c.inputs,value:t.value[1],onChange:(o,l)=>{a[t.index].value[1]=l.value,x([...a])}})]}):(0,r.jsx)(W,{id:`input-${t.index}`,size:"small",type:e,className:c.inputs,value:t.value,onChange:(o,l)=>{a[t.index].value=l.value,x([...a])}});case 4:case 2:return(0,r.jsx)(A,{size:"small",id:`input-${t.index}`,className:c.inputs,value:t.value,onOptionSelect:(o,l)=>{a[t.index].value=l.optionText??"",x([...a])},children:t.choices.map(o=>(0,r.jsx)(I,{value:o.name,children:o.displayName},o.name))});default:return}case"clear":return(0,r.jsx)(Q,{content:"Clear",relationship:"label",children:(0,r.jsx)(v,{size:"small",icon:(0,r.jsx)($,{}),onClick:()=>{a[t.index].selectedOperator===u||a[t.index].selectedOperator===d?a[t.index].value=["",""]:a[t.index].value="",x([...a])}})})}}let L=[h({columnId:"property",renderHeaderCell:()=>(0,r.jsx)(r.Fragment,{children:n.objectExplorerFiltering.property})}),h({columnId:"operator",renderHeaderCell:()=>(0,r.jsx)(r.Fragment,{children:n.objectExplorerFiltering.operator})}),h({columnId:"value",renderHeaderCell:()=>(0,r.jsx)(r.Fragment,{children:n.objectExplorerFiltering.value})}),h({columnId:"clear",renderHeaderCell:()=>(0,r.jsx)(r.Fragment,{children:n.objectExplorerFiltering.clear})})],[D]=(0,m.useState)(L),ve={property:{minWidth:150,idealWidth:200,defaultWidth:300},operator:{minWidth:140,idealWidth:140,defaultWidth:140},value:{minWidth:150,idealWidth:150,defaultWidth:150},clear:{minWidth:20,idealWidth:20,defaultWidth:20}},[he]=(0,m.useState)(ve),{getRows:Te,columnSizing_unstable:_,tableRef:Ce}=X({columns:D,items:a},[J({columnSizingOptions:he})]),Oe=Te();if(i)return(0,r.jsxs)("div",{className:c.root,children:[(0,r.jsx)(M,{size:400,children:G("Filter Settings")}),(0,r.jsx)(K,{children:n.objectExplorerFiltering.path(i?.state?.nodePath)}),f&&f!==""&&(0,r.jsx)(ne,{intent:"error",children:(0,r.jsxs)(se,{children:[(0,r.jsx)(ae,{children:n.objectExplorerFiltering.error}),f]})}),(0,r.jsxs)(ee,{as:"table",size:"small",..._.getTableProps(),ref:Ce,children:[(0,r.jsx)(te,{children:(0,r.jsx)(H,{children:D.map(s=>(0,r.jsx)(re,{..._.getTableHeaderCellProps(s.columnId),children:s.renderHeaderCell()},s.columnId))})}),(0,r.jsx)(Z,{children:Oe.map((s,t)=>(0,r.jsx)(H,{children:L.map(e=>(0,r.jsx)(Y,{..._.getTableHeaderCellProps(e.columnId),children:fe(e.columnId,a[t])},e.columnId))},`row${t}`))})]}),(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",marginTop:"10px",maxWidth:"300px"},children:[(0,r.jsx)(v,{appearance:"secondary",onClick:()=>{for(let s of a)s.selectedOperator===u||s.selectedOperator===d?s.value=["",""]:s.value="";x([...a])},children:n.objectExplorerFiltering.clearAll}),(0,r.jsx)(v,{appearance:"secondary",onClick:()=>{i.cancel()},children:n.common.close}),(0,r.jsx)(v,{appearance:"primary",onClick:()=>{let s=a.map(e=>{let o;switch(e.type){case 2:e.value===""||e.value===void 0?o=void 0:o=e.choices?.find(l=>l.displayName===e.value)?.name??void 0;break;case 1:e.selectedOperator===u||e.selectedOperator===d?o=e.value.map(l=>Number(l)):o=Number(e.value);break;case 0:case 3:o=e.value;break;case 4:e.value===""||e.value===void 0?o=void 0:o=e.choices?.find(l=>l.displayName===e.value)?.name??void 0;break}return{name:e.name,value:o,operator:ge(e.selectedOperator)}}).filter(e=>e.operator===6||e.operator===7?e.value[0]!==""||e.value[1]!=="":e.value!==""&&e.value!==void 0),t="";for(let e of s)if(e.operator===6||e.operator===7){let o=e.value[0],l=e.value[1];!o&&l?t=n.objectExplorerFiltering.firstValueEmptyError(y(e.operator),e.name):!l&&o?t=n.objectExplorerFiltering.secondValueEmptyError(y(e.operator),e.name):o>l&&(t=n.objectExplorerFiltering.firstValueLessThanSecondError(y(e.operator),e.name))}if(t){T(t);return}i.submit(s)},children:n.objectExplorerFiltering.ok})]})]})};var F=p(E());xe.default.createRoot(document.getElementById("root")).render((0,F.jsx)(le,{children:(0,F.jsx)(de,{children:(0,F.jsx)(me,{})})}));
